$schema: "http://json-schema.org/draft-04/schema#"

id: "aliquot"
title: Aliquot
type: object
nodeTerms: null
namespace: .nan
category: biospecimen
program: '*'
project: '*'
description: Pertaining to a portion of the whole; any one of two or more samples
  of something, of the same volume or weight.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: samples
    backref: aliquots
    label: derived_from
    target_type: sample
    multiplicity: many_to_many
    required: true

required:
  - submitter_id
  - type
  - samples

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  aliquot_description:
    description: Free text to describe the aliquot.
    terms: null
    type: string

  aliquot_quantity:
    terms:
      - $ref: "_terms.yaml#/aliquot_quantity"
    type: number

  aliquot_volume:
    terms:
      - $ref: "_terms.yaml#/aliquot_volume"
    type: number

  amount:
    terms:
      - $ref: "_terms.yaml#/amount"
    type: number

  analyte_type:
    terms:
      - $ref: "_terms.yaml#/analyte_type"
    type: string

  analyte_type_id:
    terms:
      - $ref: "_terms.yaml#/analyte_type_id"
    enumTerms:
      D: null
      E: null
      G: null
      H: null
      R: null
      S: null
      T: null
      W: null
      X: null
      Y: null

  concentration:
    terms:
      - $ref: "_terms.yaml#/concentration"
    type: number

  created_datetime:
    terms:
      - $ref: "_definitions.yaml#/datetime"
    type: null

  id:
    terms:
      - $ref: "_definitions.yaml#/UUID"
    type: null

  project_id:
    terms:
      - $ref: "_definitions.yaml#/project_id"
    type: null

  source_center:
    terms:
      - $ref: "_terms.yaml#/source_center"
    type: string

  state:
    terms:
      - $ref: "_definitions.yaml#/state"
    type: null

  submitter_id:
    description: The legacy barcode used before prior to the use UUIDs. For TCGA this
      is bcr aliquot barcode.
    terms: null
    type: "['string', 'null']"

  type:
    terms: null
    type: string

  updated_datetime:
    terms:
      - $ref: "_definitions.yaml#/datetime"
    type: null

  samples:
    $ref: "_definitions.yaml#/to_many"
