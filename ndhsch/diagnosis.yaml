$schema: "http://json-schema.org/draft-04/schema#"

id: "diagnosis"
title: Diagnosis
type: object
nodeTerms: null
namespace: https://niaid.bionimbus.org
category: clinical
program: '*'
project: '*'
description: Data from the investigation, analysis and recognition of the presence
  and nature of disease, condition, or injury from expressed signs and symptoms; also,
  the scientific determination of any kind; the concise results of such an investigation.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: subjects
    backref: diagnoses
    label: describes
    target_type: subject
    multiplicity: many_to_one
    required: true

required:
  - submitter_id
  - type
  - subjects
  - primary_diagnosis
  - version_data
  - visit_id

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  $ref: "_definitions.yaml#/ubiquitous_properties"

  classification_of_tumor:
    terms:
      - $ref: "_terms.yaml#/classification_of_tumor"
    enumTerms:
      Not Allowed To Collect: null
      Unknown: null
      metastasis: null
      not reported: null
      other: null
      primary: null
      recurrence: null

  comorbidity:
    description: The simultaneous presence of two chronic diseases or conditions in
      a patient
    terms: null
    type: boolean

  comorbidity_anemia:
    description: Presence of anemia as comorbidity
    terms: null
    type: boolean

  comorbidity_diabetes:
    description: Presence of diabetes as comorbidity
    terms: null
    type: boolean

  comorbidity_hepatic_disease:
    description: Presence of hepatic disease as comorbidity
    terms: null
    type: boolean

  comorbidity_hiv:
    description: Presence of HIV as comorbidity
    terms: null
    type: boolean

  comorbidity_renal_disease:
    description: Presence of renal disease as comorbidity
    terms: null
    type: boolean

  lung_localization:
    description: Pulmonary tuberculosis (PTB) and extrapulmonary TB (EPTB)- PTB and
      EPTB diagnosed at the same time. A patient with both pulmonary and extrapulmonary
      TB should be classified as a case of PTB. Extrapulmonary tuberculosis (EPTB)
      refers to any bacteriologically confirmed or clinically diagnosed case of TB
      involving organs other than the lungs, e.g. pleura, lymph nodes, abdomen, genitourinary
      tract, skin, joints and bones, meninges. Pulmonary tuberculosis (PTB) refers
      to any bacteriologically confirmed or clinically diagnosed case of TB involving
      the lung parenchyma or the tracheobronchial tree. Miliary TB is classified as
      PTB because there are lesions in the lungs. Tuberculous intra-thoracic lymphadenopathy
      (mediastinal and/or hilar) or tuberculous pleural effusion, without radiographic
      abnormalities in the lungs, constitutes a case of extrapulmonary TB.
    terms: null
    enumTerms:
      Extrapulmonary: null
      Pulmonary: null
      Pulmonary and Extrapulmonary: null

  morphology:
    terms:
      - $ref: "_terms.yaml#/morphology"
    type: string

  primary_diagnosis:
    terms:
      - $ref: "_terms.yaml#/primary_diagnosis"
    type: string

  prior_treatment:
    terms:
      - $ref: "_terms.yaml#/prior_treatment"
    enumTerms:
      No: null
      Not Allowed To Collect: null
      Not Reported: null
      Unknown: null
      Yes: null

  progression_or_recurrence:
    terms:
      - $ref: "_terms.yaml#/progression_or_recurrence"
    enumTerms:
      Not Allowed To Collect: null
      no: null
      not reported: null
      unknown: null
      yes: null

  tissue_or_organ_of_origin:
    terms:
      - $ref: "_terms.yaml#/tissue_or_organ_of_origin"
    type: string

  tumor_grade:
    terms:
      - $ref: "_terms.yaml#/tumor_grade"
    type: string

  tumor_stage:
    terms:
      - $ref: "_terms.yaml#/tumor_stage"
    type: string

  type_of_resistance:
    description: Type of TB resistance
    terms: null
    enumTerms:
      MDR non XDR: null
      Mono DR: null
      Poly DR: null
      Sensitive: null
      XDR: null

  version_data:
    description: Version number of data 011= Version 01 in Visit 01 .. 993= Version
      03 in Visit 99
    terms: null
    type: integer

  visit_id:
    description: Visit identifier
    terms: null
    type: integer

  year_of_diagnosis:
    terms:
      - $ref: "_terms.yaml#/year_of_diagnosis"
    type: "['number', 'null']"

  subjects:
    $ref: "_definitions.yaml#/to_one"
